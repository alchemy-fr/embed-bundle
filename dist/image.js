/*! For license information please see image.js.LICENSE.txt */
(()=>{var t={902:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(419),i={assetsPath:"/plugins/web-gallery/assets",api:{baseUrl:"/web-gallery",basePath:"",ajaxSetup:{accept:"application/json",contentType:"application/json",async:!0,cache:!1,dataType:"json",complete:function(){},error:function(t,e,n){var r;return console.log("ajax failed",t,e,n),(t.getResponseHeader("content-type")||"").indexOf("json")>-1&&(r=$.parseJSON(t.responseText)),r}}}},o=window.envConfiguration;void 0!==o&&(i=r.extend(i,o)),e.default=i},82:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(788),s=n(902),a=null,u=function(t){function e(){var e=t.call(this,s.default)||this;return a||(a=e),a}return i(e,t),e}(o.default);e.default=u},788:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(419),i=function(){function t(t){this.configuration=t}return t.prototype.get=function(t){if(void 0!==t){var e=this._findKeyValue(t||this.configuration);return"string"==typeof e?e:e||null}return this.configuration},t.prototype.set=function(t,e){void 0!==t&&(this.configuration[t]=e)},t.prototype._findKeyValue=function(t){if(t){var e=r.isString(t),n=e?t:t.name;if(t.indexOf(".")>0)return this._search(this.configuration,n);var i=this.configuration[n];return i&&(e||!e&&i===t)||e?i:void 0}},t.prototype._search=function(t,e){if(r.isNumber(e)&&(e=[e]),r.isEmpty(e))return t;if(r.isEmpty(t))return null;if(r.isString(e))return this._search(t,e.split("."));var n=e[0];return 1===e.length?void 0===t[n]?null:t[n]:this._search(t[n],e.slice(1))},t}();e.default=i},231:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(419),i=function(){function t(t){var e=this;if(t||(t={}),t.target&&(this.$embedResource=t.target),t.container)this.$embedContainer=t.container;else{var n=document.getElementsByTagName("body");this.$embedContainer=n[0]}void 0!==t.resizeCallback&&(this.resizeCallback=t.resizeCallback),!0===t.resizeOnWindowChange&&window.addEventListener("resize",r.debounce((function(){e.onResizeWindow(window.innerWidth,window.innerHeight)}),300),!1),this.defaultWidth=120,this.defaultHeight=120}return t.prototype.setContainerDimensions=function(t){this.containerDimensions=t},t.prototype.setTargetDimensions=function(t){this.targetDimensions=t},t.prototype.onResizeWindow=function(t,e){this.setContainerDimensions({width:t,height:e}),this.setTargetDimensions({width:-1===window.location.search.indexOf("homothetic=true")?t:window.embedPlugin.resourceOriginalWidth,height:-1===window.location.search.indexOf("homothetic=true")?e:window.embedPlugin.resourceOriginalHeight}),this.resize()},t.prototype.resize=function(){var t=this.containerDimensions.width,e=this.containerDimensions.height,n=this.targetDimensions.width,r=this.targetDimensions.height,i=this.targetDimensions.height/this.targetDimensions.width,o=n,s=r;n>r?(o>t&&(o=t,s=t*i),s>e&&(o=e/i,s=e)):(s>e&&(o=e/i,s=e),-1!==window.location.search.indexOf("homothetic=true")&&o>t&&(o=t,s=t*i)),null===o&&null===s&&(o=this.defaultWidth,s=this.defaultHeight),o=Math.floor(o),s=Math.floor(s);var a=0;if(this.containerDimensions.height>s&&(a=(this.containerDimensions.height-s)/2),this.$embedResource.style.width=o+"px",this.$embedResource.style.height=s+"px",this.$embedContainer.style.width=o+"px",this.$embedContainer.style.height=s+"px",this.$embedContainer.style["margin-top"]=a+"px",void 0!==this.resizeCallback&&this.resizeCallback.apply(this,[{width:o,height:s,"margin-top":a}]),-1!==window.location.search.indexOf("homothetic=true")){var u=Math.floor(e/i),l=Math.floor(t*i),c={id:"Phraseanet",url:window.location.href,optimizedWidth:n<u?n:u,optimizedHeight:r<l?r:l};parent.postMessage(c,"*")}},t}();e.default=i},821:(t,e,n)=>{var r;void 0===(r=function(){var t="xPYMx",e={},n=function(t){var e=document.createEvent("Event");e.initEvent("pym:"+t,!0,!0),document.dispatchEvent(e)},r=function(t){var e=new RegExp("[\\?&]"+t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},i=function(t,e){if(("*"===e.xdomain||t.origin.match(new RegExp(e.xdomain+"$")))&&"string"==typeof t.data)return!0},o=function(e,n,r){return["pym",e,n,r].join(t)},s=Date.now||function(){return(new Date).getTime()},a=function(){for(var t=e.autoInitInstances.length-1;t>=0;t--){var n=e.autoInitInstances[t];n.el.getElementsByTagName("iframe").length&&n.el.getElementsByTagName("iframe")[0].contentWindow||e.autoInitInstances.splice(t,1)}};return e.autoInitInstances=[],e.autoInit=function(t){var r=document.querySelectorAll("[data-pym-src]:not([data-pym-auto-initialized])"),i=r.length;a();for(var o=0;o<i;++o){var s=r[o];s.setAttribute("data-pym-auto-initialized",""),""===s.id&&(s.id="pym-"+o+"-"+Math.random().toString(36).substr(2,5));var u=s.getAttribute("data-pym-src"),l={xdomain:"string",title:"string",name:"string",id:"string",sandbox:"string",allowfullscreen:"boolean",parenturlparam:"string",parenturlvalue:"string",optionalparams:"boolean",trackscroll:"boolean",scrollwait:"number"},c={};for(var f in l)if(null!==s.getAttribute("data-pym-"+f))switch(l[f]){case"boolean":c[f]=!("false"===s.getAttribute("data-pym-"+f));break;case"string":c[f]=s.getAttribute("data-pym-"+f);break;case"number":var h=Number(s.getAttribute("data-pym-"+f));isNaN(h)||(c[f]=h);break;default:console.err("unrecognized attribute type")}var d=new e.Parent(s.id,u,c);e.autoInitInstances.push(d)}return t||n("pym-initialized"),e.autoInitInstances},e.Parent=function(e,n,r){for(var u in this.id=e,this.url=n,this.el=document.getElementById(e),this.iframe=null,this.settings={xdomain:"*",optionalparams:!0,parenturlparam:"parentUrl",parenturlvalue:window.location.href,trackscroll:!1,scrollwait:100},this.messageRegex=function(e){return new RegExp("^"+["pym",e,"(\\S+)","(.*)"].join(t)+"$")}(this.id),this.messageHandlers={},r=r||{},this._constructIframe=function(){var t=this.el.offsetWidth.toString();this.iframe=document.createElement("iframe");var e="",n=this.url.indexOf("#");for(n>-1&&(e=this.url.substring(n,this.url.length),this.url=this.url.substring(0,n)),this.url.indexOf("?")<0?this.url+="?":this.url+="&",this.iframe.src=this.url+"initialWidth="+t+"&childId="+this.id,this.settings.optionalparams&&(this.iframe.src+="&parentTitle="+encodeURIComponent(document.title),this.iframe.src+="&"+this.settings.parenturlparam+"="+encodeURIComponent(this.settings.parenturlvalue)),this.iframe.src+=e,this.iframe.setAttribute("width","100%"),this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("marginheight","0"),this.iframe.setAttribute("frameborder","0"),this.settings.title&&this.iframe.setAttribute("title",this.settings.title),void 0!==this.settings.allowfullscreen&&!1!==this.settings.allowfullscreen&&this.iframe.setAttribute("allowfullscreen",""),void 0!==this.settings.sandbox&&"string"==typeof this.settings.sandbox&&this.iframe.setAttribute("sandbox",this.settings.sandbox),this.settings.id&&(document.getElementById(this.settings.id)||this.iframe.setAttribute("id",this.settings.id)),this.settings.name&&this.iframe.setAttribute("name",this.settings.name);this.el.firstChild;)this.el.removeChild(this.el.firstChild);this.el.appendChild(this.iframe),window.addEventListener("resize",this._onResize),this.settings.trackscroll&&window.addEventListener("scroll",this._throttleOnScroll)},this._onResize=function(){this.sendWidth(),this.settings.trackscroll&&this.sendViewportAndIFramePosition()}.bind(this),this._onScroll=function(){this.sendViewportAndIFramePosition()}.bind(this),this._fire=function(t,e){if(t in this.messageHandlers)for(var n=0;n<this.messageHandlers[t].length;n++)this.messageHandlers[t][n].call(this,e)},this.remove=function(){window.removeEventListener("message",this._processMessage),window.removeEventListener("resize",this._onResize),this.el.removeChild(this.iframe),a()},this._processMessage=function(t){if(i(t,this.settings)&&"string"==typeof t.data){var e=t.data.match(this.messageRegex);if(!e||3!==e.length)return!1;var n=e[1],r=e[2];this._fire(n,r)}}.bind(this),this._onHeightMessage=function(t){var e=parseInt(t);this.iframe.setAttribute("height",e+"px")},this._onNavigateToMessage=function(t){(function(t){if(t.match(/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/gi))return!0})(t)&&(document.location.href=t)},this._onScrollToChildPosMessage=function(t){var e=document.getElementById(this.id).getBoundingClientRect().top+window.pageYOffset+parseInt(t);window.scrollTo(0,e)},this.onMessage=function(t,e){t in this.messageHandlers||(this.messageHandlers[t]=[]),this.messageHandlers[t].push(e)},this.sendMessage=function(t,e){this.el.getElementsByTagName("iframe").length&&(this.el.getElementsByTagName("iframe")[0].contentWindow?this.el.getElementsByTagName("iframe")[0].contentWindow.postMessage(o(this.id,t,e),"*"):this.remove())},this.sendWidth=function(){var t=this.el.offsetWidth.toString();this.sendMessage("width",t)},this.sendViewportAndIFramePosition=function(){var t=this.iframe.getBoundingClientRect(),e=(window.innerWidth||document.documentElement.clientWidth)+" "+(window.innerHeight||document.documentElement.clientHeight);e+=" "+t.top+" "+t.left,e+=" "+t.bottom+" "+t.right,this.sendMessage("viewport-iframe-position",e)},r)this.settings[u]=r[u];return this._throttleOnScroll=function(t,e,n){var r,i,o,a=null,u=0;n||(n={});var l=function(){u=!1===n.leading?0:s(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var c=s();u||!1!==n.leading||(u=c);var f=e-(c-u);return r=this,i=arguments,f<=0||f>e?(a&&(clearTimeout(a),a=null),u=c,o=t.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(l,f)),o}}(this._onScroll.bind(this),this.settings.scrollwait),this.onMessage("height",this._onHeightMessage),this.onMessage("navigateTo",this._onNavigateToMessage),this.onMessage("scrollToChildPos",this._onScrollToChildPosMessage),this.onMessage("parentPositionInfo",this.sendViewportAndIFramePosition),window.addEventListener("message",this._processMessage,!1),this._constructIframe(),this},e.Child=function(t){this.parentWidth=null,this.id=null,this.parentTitle=null,this.parentUrl=null,this.settings={renderCallback:null,xdomain:"*",polling:0,parenturlparam:"parentUrl"},this.timerId=null,this.messageRegex=null,this.messageHandlers={},t=t||{},this.onMessage=function(t,e){t in this.messageHandlers||(this.messageHandlers[t]=[]),this.messageHandlers[t].push(e)},this._fire=function(t,e){if(t in this.messageHandlers)for(var n=0;n<this.messageHandlers[t].length;n++)this.messageHandlers[t][n].call(this,e)},this._processMessage=function(t){if(i(t,this.settings)&&"string"==typeof t.data){var e=t.data.match(this.messageRegex);if(e&&3===e.length){var n=e[1],r=e[2];this._fire(n,r)}}}.bind(this),this._onWidthMessage=function(t){var e=parseInt(t);e!==this.parentWidth&&(this.parentWidth=e,this.settings.renderCallback&&this.settings.renderCallback(e),this.sendHeight())},this.sendMessage=function(t,e){window.parent.postMessage(o(this.id,t,e),"*")},this.sendHeight=function(){var t=document.getElementsByTagName("body")[0].offsetHeight.toString();return this.sendMessage("height",t),t}.bind(this),this.getParentPositionInfo=function(){this.sendMessage("parentPositionInfo")},this.scrollParentTo=function(t){this.sendMessage("navigateTo","#"+t)},this.navigateParentTo=function(t){this.sendMessage("navigateTo",t)},this.scrollParentToChildEl=function(t){var e=document.getElementById(t).getBoundingClientRect().top+window.pageYOffset;this.scrollParentToChildPos(e)},this.scrollParentToChildPos=function(t){this.sendMessage("scrollToChildPos",t.toString())};for(var e in this.remove=function(){window.removeEventListener("message",this._processMessage),this.timerId&&clearInterval(this.timerId)},t)this.settings[e]=t[e];this.id=r("childId")||t.id,this.messageRegex=new RegExp("^pymxPYMx"+this.id+"xPYMx(\\S+)"+"xPYMx(.*)$");var s=parseInt(r("initialWidth"));return this.parentUrl=r(this.settings.parenturlparam),this.parentTitle=r("parentTitle"),this.onMessage("width",this._onWidthMessage),window.addEventListener("message",this._processMessage,!1),this.settings.renderCallback&&this.settings.renderCallback(s),this.sendHeight(),this.settings.polling&&(this.timerId=window.setInterval(this.sendHeight,this.settings.polling)),function(t){var e,r=document.getElementsByTagName("html")[0],i=r.className;try{e=window.self!==window.top?"embedded":"not-embedded"}catch(t){e="embedded"}i.indexOf(e)<0&&(r.className=i?i+" "+e:e,t&&t(e),n("marked-embedded"))}(t.onMarkedEmbeddedStatus),this},"undefined"!=typeof document&&e.autoInit(!0),e}.call(e,n,e,t))||(t.exports=r)},419:function(t,e,n){t.exports=function(){var t="1.13.1",e="object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g||Function("return this")()||{},r=Array.prototype,i=Object.prototype,o="undefined"!=typeof Symbol?Symbol.prototype:null,s=r.push,a=r.slice,u=i.toString,l=i.hasOwnProperty,c="undefined"!=typeof ArrayBuffer,f="undefined"!=typeof DataView,h=Array.isArray,d=Object.keys,p=Object.create,g=c&&ArrayBuffer.isView,m=isNaN,v=isFinite,y=!{toString:null}.propertyIsEnumerable("toString"),b=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],w=Math.pow(2,53)-1;function _(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}}function x(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function M(t){return void 0===t}function j(t){return!0===t||!1===t||"[object Boolean]"===u.call(t)}function O(t){var e="[object "+t+"]";return function(t){return u.call(t)===e}}var E=O("String"),I=O("Number"),S=O("Date"),A=O("RegExp"),T=O("Error"),C=O("Symbol"),P=O("ArrayBuffer"),R=O("Function"),z=e.document&&e.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof z&&(R=function(t){return"function"==typeof t||!1});var W=R,B=O("Object"),H=f&&B(new DataView(new ArrayBuffer(8))),k="undefined"!=typeof Map&&B(new Map),N=O("DataView"),D=H?function(t){return null!=t&&W(t.getInt8)&&P(t.buffer)}:N,$=h||O("Array");function U(t,e){return null!=t&&l.call(t,e)}var V=O("Arguments");!function(){V(arguments)||(V=function(t){return U(t,"callee")})}();var F=V;function L(t){return I(t)&&m(t)}function q(t){return function(){return t}}function Y(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=w}}function K(t){return function(e){return null==e?void 0:e[t]}}var J=K("byteLength"),G=Y(J),Q=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,X=c?function(t){return g?g(t)&&!D(t):G(t)&&Q.test(u.call(t))}:q(!1),Z=K("length");function tt(t,e){e=function(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(t){return e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=b.length,r=t.constructor,o=W(r)&&r.prototype||i,s="constructor";for(U(t,s)&&!e.contains(s)&&e.push(s);n--;)(s=b[n])in t&&t[s]!==o[s]&&!e.contains(s)&&e.push(s)}function et(t){if(!x(t))return[];if(d)return d(t);var e=[];for(var n in t)U(t,n)&&e.push(n);return y&&tt(t,e),e}function nt(t,e){var n=et(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0}function rt(t){return t instanceof rt?t:this instanceof rt?void(this._wrapped=t):new rt(t)}function it(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,J(t))}rt.VERSION=t,rt.prototype.value=function(){return this._wrapped},rt.prototype.valueOf=rt.prototype.toJSON=rt.prototype.value,rt.prototype.toString=function(){return String(this._wrapped)};var ot="[object DataView]";function st(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&function t(e,n,r,i){e instanceof rt&&(e=e._wrapped),n instanceof rt&&(n=n._wrapped);var s=u.call(e);if(s!==u.call(n))return!1;if(H&&"[object Object]"==s&&D(e)){if(!D(n))return!1;s=ot}switch(s){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return o.valueOf.call(e)===o.valueOf.call(n);case"[object ArrayBuffer]":case ot:return t(it(e),it(n),r,i)}var a="[object Array]"===s;if(!a&&X(e)){if(J(e)!==J(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;a=!0}if(!a){if("object"!=typeof e||"object"!=typeof n)return!1;var l=e.constructor,c=n.constructor;if(l!==c&&!(W(l)&&l instanceof l&&W(c)&&c instanceof c)&&"constructor"in e&&"constructor"in n)return!1}i=i||[];for(var f=(r=r||[]).length;f--;)if(r[f]===e)return i[f]===n;if(r.push(e),i.push(n),a){if((f=e.length)!==n.length)return!1;for(;f--;)if(!st(e[f],n[f],r,i))return!1}else{var h,d=et(e);if(f=d.length,et(n).length!==f)return!1;for(;f--;)if(!U(n,h=d[f])||!st(e[h],n[h],r,i))return!1}return r.pop(),i.pop(),!0}(t,e,n,r)}function at(t){if(!x(t))return[];var e=[];for(var n in t)e.push(n);return y&&tt(t,e),e}function ut(t){var e=Z(t);return function(n){if(null==n)return!1;var r=at(n);if(Z(r))return!1;for(var i=0;i<e;i++)if(!W(n[t[i]]))return!1;return t!==dt||!W(n[lt])}}var lt="forEach",ct=["clear","delete"],ft=["get","has","set"],ht=ct.concat(lt,ft),dt=ct.concat(ft),pt=["add"].concat(ct,lt,"has"),gt=k?ut(ht):O("Map"),mt=k?ut(dt):O("WeakMap"),vt=k?ut(pt):O("Set"),yt=O("WeakSet");function bt(t){for(var e=et(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function wt(t){for(var e={},n=et(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function _t(t){var e=[];for(var n in t)W(t[n])&&e.push(n);return e.sort()}function xt(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=t(o),a=s.length,u=0;u<a;u++){var l=s[u];e&&void 0!==n[l]||(n[l]=o[l])}return n}}var Mt=xt(at),jt=xt(et),Ot=xt(at,!0);function Et(t){if(!x(t))return{};if(p)return p(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function It(t){return x(t)?$(t)?t.slice():Mt({},t):t}function St(t){return $(t)?t:[t]}function At(t){return rt.toPath(t)}function Tt(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function Ct(t,e,n){var r=Tt(t,At(e));return M(r)?n:r}function Pt(t){return t}function Rt(t){return t=jt({},t),function(e){return nt(e,t)}}function zt(t){return t=At(t),function(e){return Tt(e,t)}}function Wt(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}}function Bt(t,e,n){return null==t?Pt:W(t)?Wt(t,e,n):x(t)&&!$(t)?Rt(t):zt(t)}function Ht(t,e){return Bt(t,e,1/0)}function kt(t,e,n){return rt.iteratee!==Ht?rt.iteratee(t,e):Bt(t,e,n)}function Nt(){}function Dt(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}rt.toPath=St,rt.iteratee=Ht;var $t=Date.now||function(){return(new Date).getTime()};function Ut(t){var e=function(e){return t[e]},n="(?:"+et(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}}var Vt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ft=Ut(Vt),Lt=Ut(wt(Vt)),qt=rt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Yt=/(.)^/,Kt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Jt=/\\|'|\r|\n|\u2028|\u2029/g;function Gt(t){return"\\"+Kt[t]}var Qt=/^\s*(\w|\$)+\s*$/,Xt=0;function Zt(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=Et(t.prototype),s=t.apply(o,i);return x(s)?s:o}var te=_((function(t,e){var n=te.placeholder,r=function(){for(var i=0,o=e.length,s=Array(o),a=0;a<o;a++)s[a]=e[a]===n?arguments[i++]:e[a];for(;i<arguments.length;)s.push(arguments[i++]);return Zt(t,r,this,this,s)};return r}));te.placeholder=rt;var ee=_((function(t,e,n){if(!W(t))throw new TypeError("Bind must be called on a function");var r=_((function(i){return Zt(t,r,e,this,n.concat(i))}));return r})),ne=Y(Z);function re(t,e,n,r){if(r=r||[],e||0===e){if(e<=0)return r.concat(t)}else e=1/0;for(var i=r.length,o=0,s=Z(t);o<s;o++){var a=t[o];if(ne(a)&&($(a)||F(a)))if(e>1)re(a,e-1,n,r),i=r.length;else for(var u=0,l=a.length;u<l;)r[i++]=a[u++];else n||(r[i++]=a)}return r}var ie=_((function(t,e){var n=(e=re(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=ee(t[r],t)}return t})),oe=_((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),se=te(oe,rt,1);function ae(t){return function(){return!t.apply(this,arguments)}}function ue(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}var le=te(ue,2);function ce(t,e,n){e=kt(e,n);for(var r,i=et(t),o=0,s=i.length;o<s;o++)if(e(t[r=i[o]],r,t))return r}function fe(t){return function(e,n,r){n=kt(n,r);for(var i=Z(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}var he=fe(1),de=fe(-1);function pe(t,e,n,r){for(var i=(n=kt(n,r,1))(e),o=0,s=Z(t);o<s;){var a=Math.floor((o+s)/2);n(t[a])<i?o=a+1:s=a}return o}function ge(t,e,n){return function(r,i,o){var s=0,u=Z(r);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+u,s):u=o>=0?Math.min(o+1,u):o+u+1;else if(n&&o&&u)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(a.call(r,s,u),L))>=0?o+s:-1;for(o=t>0?s:u-1;o>=0&&o<u;o+=t)if(r[o]===i)return o;return-1}}var me=ge(1,he,pe),ve=ge(-1,de);function ye(t,e,n){var r=(ne(t)?he:ce)(t,e,n);if(void 0!==r&&-1!==r)return t[r]}function be(t,e,n){var r,i;if(e=Wt(e,n),ne(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=et(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t}function we(t,e,n){e=kt(e,n);for(var r=!ne(t)&&et(t),i=(r||t).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=e(t[a],a,t)}return o}function _e(t){var e=function(e,n,r,i){var o=!ne(e)&&et(e),s=(o||e).length,a=t>0?0:s-1;for(i||(r=e[o?o[a]:a],a+=t);a>=0&&a<s;a+=t){var u=o?o[a]:a;r=n(r,e[u],u,e)}return r};return function(t,n,r,i){var o=arguments.length>=3;return e(t,Wt(n,i,4),r,o)}}var xe=_e(1),Me=_e(-1);function je(t,e,n){var r=[];return e=kt(e,n),be(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function Oe(t,e,n){e=kt(e,n);for(var r=!ne(t)&&et(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0}function Ee(t,e,n){e=kt(e,n);for(var r=!ne(t)&&et(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1}function Ie(t,e,n,r){return ne(t)||(t=bt(t)),("number"!=typeof n||r)&&(n=0),me(t,e,n)>=0}var Se=_((function(t,e,n){var r,i;return W(e)?i=e:(e=At(e),r=e.slice(0,-1),e=e[e.length-1]),we(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=Tt(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))}));function Ae(t,e){return we(t,zt(e))}function Te(t,e,n){var r,i,o=-1/0,s=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,u=(t=ne(t)?t:bt(t)).length;a<u;a++)null!=(r=t[a])&&r>o&&(o=r);else e=kt(e,n),be(t,(function(t,n,r){((i=e(t,n,r))>s||i===-1/0&&o===-1/0)&&(o=t,s=i)}));return o}function Ce(t,e,n){if(null==e||n)return ne(t)||(t=bt(t)),t[Dt(t.length-1)];var r=ne(t)?It(t):bt(t),i=Z(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,s=0;s<e;s++){var a=Dt(s,o),u=r[s];r[s]=r[a],r[a]=u}return r.slice(0,e)}function Pe(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=kt(r,i),be(n,(function(e,i){var s=r(e,i,n);t(o,e,s)})),o}}var Re=Pe((function(t,e,n){U(t,n)?t[n].push(e):t[n]=[e]})),ze=Pe((function(t,e,n){t[n]=e})),We=Pe((function(t,e,n){U(t,n)?t[n]++:t[n]=1})),Be=Pe((function(t,e,n){t[n?0:1].push(e)}),!0),He=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ke(t,e,n){return e in n}var Ne=_((function(t,e){var n={},r=e[0];if(null==t)return n;W(r)?(e.length>1&&(r=Wt(r,e[1])),e=at(t)):(r=ke,e=re(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var s=e[i],a=t[s];r(a,s,t)&&(n[s]=a)}return n})),De=_((function(t,e){var n,r=e[0];return W(r)?(r=ae(r),e.length>1&&(n=e[1])):(e=we(re(e,!1,!1),String),r=function(t,n){return!Ie(e,n)}),Ne(t,r,n)}));function $e(t,e,n){return a.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function Ue(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:$e(t,t.length-e)}function Ve(t,e,n){return a.call(t,null==e||n?1:e)}var Fe=_((function(t,e){return e=re(e,!0,!0),je(t,(function(t){return!Ie(e,t)}))})),Le=_((function(t,e){return Fe(t,e)}));function qe(t,e,n,r){j(e)||(r=n,n=e,e=!1),null!=n&&(n=kt(n,r));for(var i=[],o=[],s=0,a=Z(t);s<a;s++){var u=t[s],l=n?n(u,s,t):u;e&&!n?(s&&o===l||i.push(u),o=l):n?Ie(o,l)||(o.push(l),i.push(u)):Ie(i,u)||i.push(u)}return i}var Ye=_((function(t){return qe(re(t,!0,!0))}));function Ke(t){for(var e=t&&Te(t,Z).length||0,n=Array(e),r=0;r<e;r++)n[r]=Ae(t,r);return n}var Je=_(Ke);function Ge(t,e){return t._chain?rt(e).chain():e}function Qe(t){return be(_t(t),(function(e){var n=rt[e]=t[e];rt.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),Ge(this,n.apply(rt,t))}})),rt}be(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=r[t];rt.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0]),Ge(this,n)}})),be(["concat","join","slice"],(function(t){var e=r[t];rt.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),Ge(this,t)}}));var Xe=Qe({__proto__:null,VERSION:t,restArguments:_,isObject:x,isNull:function(t){return null===t},isUndefined:M,isBoolean:j,isElement:function(t){return!(!t||1!==t.nodeType)},isString:E,isNumber:I,isDate:S,isRegExp:A,isError:T,isSymbol:C,isArrayBuffer:P,isDataView:D,isArray:$,isFunction:W,isArguments:F,isFinite:function(t){return!C(t)&&v(t)&&!isNaN(parseFloat(t))},isNaN:L,isTypedArray:X,isEmpty:function(t){if(null==t)return!0;var e=Z(t);return"number"==typeof e&&($(t)||E(t)||F(t))?0===e:0===Z(et(t))},isMatch:nt,isEqual:function(t,e){return st(t,e)},isMap:gt,isWeakMap:mt,isSet:vt,isWeakSet:yt,keys:et,allKeys:at,values:bt,pairs:function(t){for(var e=et(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},invert:wt,functions:_t,methods:_t,extend:Mt,extendOwn:jt,assign:jt,defaults:Ot,create:function(t,e){var n=Et(t);return e&&jt(n,e),n},clone:It,tap:function(t,e){return e(t),t},get:Ct,has:function(t,e){for(var n=(e=At(e)).length,r=0;r<n;r++){var i=e[r];if(!U(t,i))return!1;t=t[i]}return!!n},mapObject:function(t,e,n){e=kt(e,n);for(var r=et(t),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=e(t[a],a,t)}return o},identity:Pt,constant:q,noop:Nt,toPath:St,property:zt,propertyOf:function(t){return null==t?Nt:function(e){return Ct(t,e)}},matcher:Rt,matches:Rt,times:function(t,e,n){var r=Array(Math.max(0,t));e=Wt(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},random:Dt,now:$t,escape:Ft,unescape:Lt,templateSettings:qt,template:function(t,e,n){!e&&n&&(e=n),e=Ot({},e,rt.templateSettings);var r=RegExp([(e.escape||Yt).source,(e.interpolate||Yt).source,(e.evaluate||Yt).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,(function(e,n,r,s,a){return o+=t.slice(i,a).replace(Jt,Gt),i=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e})),o+="';\n";var s,a=e.variable;if(a){if(!Qt.test(a))throw new Error("variable is not a bare identifier: "+a)}else o="with(obj||{}){\n"+o+"}\n",a="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{s=new Function(a,"_",o)}catch(t){throw t.source=o,t}var u=function(t){return s.call(this,t,rt)};return u.source="function("+a+"){\n"+o+"}",u},result:function(t,e,n){var r=(e=At(e)).length;if(!r)return W(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=W(o)?o.call(t):o}return t},uniqueId:function(t){var e=++Xt+"";return t?t+e:e},chain:function(t){var e=rt(t);return e._chain=!0,e},iteratee:Ht,partial:te,bind:ee,bindAll:ie,memoize:function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return U(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},delay:oe,defer:se,throttle:function(t,e,n){var r,i,o,s,a=0;n||(n={});var u=function(){a=!1===n.leading?0:$t(),r=null,s=t.apply(i,o),r||(i=o=null)},l=function(){var l=$t();a||!1!==n.leading||(a=l);var c=e-(l-a);return i=this,o=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),a=l,s=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(u,c)),s};return l.cancel=function(){clearTimeout(r),a=0,r=i=o=null},l},debounce:function(t,e,n){var r,i,o,s,a,u=function(){var l=$t()-i;e>l?r=setTimeout(u,e-l):(r=null,n||(s=t.apply(a,o)),r||(o=a=null))},l=_((function(l){return a=this,o=l,i=$t(),r||(r=setTimeout(u,e),n&&(s=t.apply(a,o))),s}));return l.cancel=function(){clearTimeout(r),r=o=a=null},l},wrap:function(t,e){return te(e,t)},negate:ae,compose:function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},after:function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},before:ue,once:le,findKey:ce,findIndex:he,findLastIndex:de,sortedIndex:pe,indexOf:me,lastIndexOf:ve,find:ye,detect:ye,findWhere:function(t,e){return ye(t,Rt(e))},each:be,forEach:be,map:we,collect:we,reduce:xe,foldl:xe,inject:xe,reduceRight:Me,foldr:Me,filter:je,select:je,reject:function(t,e,n){return je(t,ae(kt(e)),n)},every:Oe,all:Oe,some:Ee,any:Ee,contains:Ie,includes:Ie,include:Ie,invoke:Se,pluck:Ae,where:function(t,e){return je(t,Rt(e))},max:Te,min:function(t,e,n){var r,i,o=1/0,s=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,u=(t=ne(t)?t:bt(t)).length;a<u;a++)null!=(r=t[a])&&r<o&&(o=r);else e=kt(e,n),be(t,(function(t,n,r){((i=e(t,n,r))<s||i===1/0&&o===1/0)&&(o=t,s=i)}));return o},shuffle:function(t){return Ce(t,1/0)},sample:Ce,sortBy:function(t,e,n){var r=0;return e=kt(e,n),Ae(we(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")},groupBy:Re,indexBy:ze,countBy:We,partition:Be,toArray:function(t){return t?$(t)?a.call(t):E(t)?t.match(He):ne(t)?we(t,Pt):bt(t):[]},size:function(t){return null==t?0:ne(t)?t.length:et(t).length},pick:Ne,omit:De,first:Ue,head:Ue,take:Ue,initial:$e,last:function(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:Ve(t,Math.max(0,t.length-e))},rest:Ve,tail:Ve,drop:Ve,compact:function(t){return je(t,Boolean)},flatten:function(t,e){return re(t,e,!1)},without:Le,uniq:qe,unique:qe,union:Ye,intersection:function(t){for(var e=[],n=arguments.length,r=0,i=Z(t);r<i;r++){var o=t[r];if(!Ie(e,o)){var s;for(s=1;s<n&&Ie(arguments[s],o);s++);s===n&&e.push(o)}}return e},difference:Fe,unzip:Ke,transpose:Ke,zip:Je,object:function(t,e){for(var n={},r=0,i=Z(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},range:function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i},chunk:function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(a.call(t,r,r+=e));return n},mixin:Qe,default:rt});return Xe._=Xe,Xe}()}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";var t=n(821),e=n(82),r=n(231),i=function(){function n(){var n=this;this.configService=new e.default,this.$embedContainer=document.getElementById("embed-content"),this.$embedResource=document.getElementById("embed-image"),this.resourceOriginalWidth=this.configService.get("resource.width"),this.resourceOriginalHeight=this.configService.get("resource.height"),!0===this.configService.get("isStandalone")?this.initResizer():(this.$embedResource.style.width="100%",this.$embedResource.style.height="auto",this.pymChild=new t.Child({id:"phraseanet-embed-frame",renderCallback:function(t){var e=n.resourceOriginalHeight/n.resourceOriginalWidth;n.$embedResource.style.width="100%",n.$embedResource.style.height="auto",n.$embedContainer.style.height=t*e+"px"}}),""===this.pymChild.parentUrl&&this.initResizer())}return n.prototype.initResizer=function(){this.resizer=new r.default({target:this.$embedResource,container:this.$embedContainer,resizeOnWindowChange:!0===this.configService.get("resource.fitIn")}),this.resizer.setContainerDimensions({width:window.innerWidth,height:window.innerHeight}),this.resizer.setTargetDimensions({width:this.resourceOriginalWidth,height:this.resourceOriginalHeight}),this.resizer.resize()},n}();window.embedPlugin=new i})()})();