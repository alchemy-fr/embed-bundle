/*! For license information please see image.js.LICENSE.txt */
(()=>{var t={902:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(469),r={assetsPath:"/plugins/web-gallery/assets",api:{baseUrl:"/web-gallery",basePath:"",ajaxSetup:{accept:"application/json",contentType:"application/json",async:!0,cache:!1,dataType:"json",complete:function(){},error:function(t,e,n){var i;return console.log("ajax failed",t,e,n),(t.getResponseHeader("content-type")||"").indexOf("json")>-1&&(i=$.parseJSON(t.responseText)),i}}}},s=window.envConfiguration;void 0!==s&&(r=i.extend(r,s)),e.default=r},82:function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(788),o=n(902),a=null,u=function(t){function e(){var e=t.call(this,o.default)||this;return a||(a=e),a}return r(e,t),e}(s.default);e.default=u},788:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(469),r=function(){function t(t){this.configuration=t}return t.prototype.get=function(t){if(void 0!==t){var e=this._findKeyValue(t||this.configuration);return"string"==typeof e?e:e||null}return this.configuration},t.prototype.set=function(t,e){void 0!==t&&(this.configuration[t]=e)},t.prototype._findKeyValue=function(t){if(t){var e=i.isString(t),n=e?t:t.name;if(t.indexOf(".")>0)return this._search(this.configuration,n);var r=this.configuration[n];return r&&(e||!e&&r===t)||e?r:void 0}},t.prototype._search=function(t,e){if(i.isNumber(e)&&(e=[e]),i.isEmpty(e))return t;if(i.isEmpty(t))return null;if(i.isString(e))return this._search(t,e.split("."));var n=e[0];return 1===e.length?void 0===t[n]?null:t[n]:this._search(t[n],e.slice(1))},t}();e.default=r},231:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(469),r=function(){function t(t){var e=this;if(t||(t={}),t.target&&(this.$embedResource=t.target),t.container)this.$embedContainer=t.container;else{var n=document.getElementsByTagName("body");this.$embedContainer=n[0]}void 0!==t.resizeCallback&&(this.resizeCallback=t.resizeCallback),!0===t.resizeOnWindowChange&&window.addEventListener("resize",i.debounce((function(){e.onResizeWindow(window.innerWidth,window.innerHeight)}),300),!1),this.defaultWidth=120,this.defaultHeight=120}return t.prototype.setContainerDimensions=function(t){this.containerDimensions=t},t.prototype.setTargetDimensions=function(t){this.targetDimensions=t},t.prototype.onResizeWindow=function(t,e){this.setContainerDimensions({width:t,height:e}),this.setTargetDimensions({width:window.embedPlugin.resourceOriginalWidth,height:window.embedPlugin.resourceOriginalHeight}),this.resize()},t.prototype.resize=function(){var t=this.containerDimensions.width,e=this.containerDimensions.height,n=this.targetDimensions.width,i=this.targetDimensions.height,r=this.targetDimensions.height/this.targetDimensions.width,s=n,o=i;n>i?(s>t&&(s=t,o=t*r),o>e&&(s=e/r,o=e)):(o>e&&(s=e/r,o=e),s>t&&(s=t,o=t*r)),null===s&&null===o&&(s=this.defaultWidth,o=this.defaultHeight),s=Math.floor(s),o=Math.floor(o);var a=0;this.containerDimensions.height>o&&(a=(this.containerDimensions.height-o)/2),this.$embedResource.style.width=s+"px",this.$embedResource.style.height=o+"px",this.$embedContainer.style.width=s+"px",this.$embedContainer.style.height=o+"px",this.$embedContainer.style["margin-top"]=a+"px",void 0!==this.resizeCallback&&this.resizeCallback.apply(this,[{width:s,height:o,"margin-top":a}]);var u=Math.floor(e/r),l=Math.floor(t*r),c={id:"Phraseanet",url:window.location.href,optimizedWidth:n<u?n:u,optimizedHeight:i<l?i:l};parent.postMessage(c,"*")},t}();e.default=r},821:(t,e,n)=>{var i;void 0===(i=function(){var t="xPYMx",e={},n=function(t){var e=document.createEvent("Event");e.initEvent("pym:"+t,!0,!0),document.dispatchEvent(e)},i=function(t){var e=new RegExp("[\\?&]"+t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},r=function(t,e){if(("*"===e.xdomain||t.origin.match(new RegExp(e.xdomain+"$")))&&"string"==typeof t.data)return!0},s=function(e,n,i){return["pym",e,n,i].join(t)},o=Date.now||function(){return(new Date).getTime()},a=function(){for(var t=e.autoInitInstances.length-1;t>=0;t--){var n=e.autoInitInstances[t];n.el.getElementsByTagName("iframe").length&&n.el.getElementsByTagName("iframe")[0].contentWindow||e.autoInitInstances.splice(t,1)}};return e.autoInitInstances=[],e.autoInit=function(t){var i=document.querySelectorAll("[data-pym-src]:not([data-pym-auto-initialized])"),r=i.length;a();for(var s=0;s<r;++s){var o=i[s];o.setAttribute("data-pym-auto-initialized",""),""===o.id&&(o.id="pym-"+s+"-"+Math.random().toString(36).substr(2,5));var u=o.getAttribute("data-pym-src"),l={xdomain:"string",title:"string",name:"string",id:"string",sandbox:"string",allowfullscreen:"boolean",parenturlparam:"string",parenturlvalue:"string",optionalparams:"boolean",trackscroll:"boolean",scrollwait:"number"},c={};for(var h in l)if(null!==o.getAttribute("data-pym-"+h))switch(l[h]){case"boolean":c[h]=!("false"===o.getAttribute("data-pym-"+h));break;case"string":c[h]=o.getAttribute("data-pym-"+h);break;case"number":var f=Number(o.getAttribute("data-pym-"+h));isNaN(f)||(c[h]=f);break;default:console.err("unrecognized attribute type")}var d=new e.Parent(o.id,u,c);e.autoInitInstances.push(d)}return t||n("pym-initialized"),e.autoInitInstances},e.Parent=function(e,n,i){for(var u in this.id=e,this.url=n,this.el=document.getElementById(e),this.iframe=null,this.settings={xdomain:"*",optionalparams:!0,parenturlparam:"parentUrl",parenturlvalue:window.location.href,trackscroll:!1,scrollwait:100},this.messageRegex=function(e){return new RegExp("^"+["pym",e,"(\\S+)","(.*)"].join(t)+"$")}(this.id),this.messageHandlers={},i=i||{},this._constructIframe=function(){var t=this.el.offsetWidth.toString();this.iframe=document.createElement("iframe");var e="",n=this.url.indexOf("#");for(n>-1&&(e=this.url.substring(n,this.url.length),this.url=this.url.substring(0,n)),this.url.indexOf("?")<0?this.url+="?":this.url+="&",this.iframe.src=this.url+"initialWidth="+t+"&childId="+this.id,this.settings.optionalparams&&(this.iframe.src+="&parentTitle="+encodeURIComponent(document.title),this.iframe.src+="&"+this.settings.parenturlparam+"="+encodeURIComponent(this.settings.parenturlvalue)),this.iframe.src+=e,this.iframe.setAttribute("width","100%"),this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("marginheight","0"),this.iframe.setAttribute("frameborder","0"),this.settings.title&&this.iframe.setAttribute("title",this.settings.title),void 0!==this.settings.allowfullscreen&&!1!==this.settings.allowfullscreen&&this.iframe.setAttribute("allowfullscreen",""),void 0!==this.settings.sandbox&&"string"==typeof this.settings.sandbox&&this.iframe.setAttribute("sandbox",this.settings.sandbox),this.settings.id&&(document.getElementById(this.settings.id)||this.iframe.setAttribute("id",this.settings.id)),this.settings.name&&this.iframe.setAttribute("name",this.settings.name);this.el.firstChild;)this.el.removeChild(this.el.firstChild);this.el.appendChild(this.iframe),window.addEventListener("resize",this._onResize),this.settings.trackscroll&&window.addEventListener("scroll",this._throttleOnScroll)},this._onResize=function(){this.sendWidth(),this.settings.trackscroll&&this.sendViewportAndIFramePosition()}.bind(this),this._onScroll=function(){this.sendViewportAndIFramePosition()}.bind(this),this._fire=function(t,e){if(t in this.messageHandlers)for(var n=0;n<this.messageHandlers[t].length;n++)this.messageHandlers[t][n].call(this,e)},this.remove=function(){window.removeEventListener("message",this._processMessage),window.removeEventListener("resize",this._onResize),this.el.removeChild(this.iframe),a()},this._processMessage=function(t){if(r(t,this.settings)&&"string"==typeof t.data){var e=t.data.match(this.messageRegex);if(!e||3!==e.length)return!1;var n=e[1],i=e[2];this._fire(n,i)}}.bind(this),this._onHeightMessage=function(t){var e=parseInt(t);this.iframe.setAttribute("height",e+"px")},this._onNavigateToMessage=function(t){(function(t){if(t.match(/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/gi))return!0})(t)&&(document.location.href=t)},this._onScrollToChildPosMessage=function(t){var e=document.getElementById(this.id).getBoundingClientRect().top+window.pageYOffset+parseInt(t);window.scrollTo(0,e)},this.onMessage=function(t,e){t in this.messageHandlers||(this.messageHandlers[t]=[]),this.messageHandlers[t].push(e)},this.sendMessage=function(t,e){this.el.getElementsByTagName("iframe").length&&(this.el.getElementsByTagName("iframe")[0].contentWindow?this.el.getElementsByTagName("iframe")[0].contentWindow.postMessage(s(this.id,t,e),"*"):this.remove())},this.sendWidth=function(){var t=this.el.offsetWidth.toString();this.sendMessage("width",t)},this.sendViewportAndIFramePosition=function(){var t=this.iframe.getBoundingClientRect(),e=(window.innerWidth||document.documentElement.clientWidth)+" "+(window.innerHeight||document.documentElement.clientHeight);e+=" "+t.top+" "+t.left,e+=" "+t.bottom+" "+t.right,this.sendMessage("viewport-iframe-position",e)},i)this.settings[u]=i[u];return this._throttleOnScroll=function(t,e,n){var i,r,s,a=null,u=0;n||(n={});var l=function(){u=!1===n.leading?0:o(),a=null,s=t.apply(i,r),a||(i=r=null)};return function(){var c=o();u||!1!==n.leading||(u=c);var h=e-(c-u);return i=this,r=arguments,h<=0||h>e?(a&&(clearTimeout(a),a=null),u=c,s=t.apply(i,r),a||(i=r=null)):a||!1===n.trailing||(a=setTimeout(l,h)),s}}(this._onScroll.bind(this),this.settings.scrollwait),this.onMessage("height",this._onHeightMessage),this.onMessage("navigateTo",this._onNavigateToMessage),this.onMessage("scrollToChildPos",this._onScrollToChildPosMessage),this.onMessage("parentPositionInfo",this.sendViewportAndIFramePosition),window.addEventListener("message",this._processMessage,!1),this._constructIframe(),this},e.Child=function(t){this.parentWidth=null,this.id=null,this.parentTitle=null,this.parentUrl=null,this.settings={renderCallback:null,xdomain:"*",polling:0,parenturlparam:"parentUrl"},this.timerId=null,this.messageRegex=null,this.messageHandlers={},t=t||{},this.onMessage=function(t,e){t in this.messageHandlers||(this.messageHandlers[t]=[]),this.messageHandlers[t].push(e)},this._fire=function(t,e){if(t in this.messageHandlers)for(var n=0;n<this.messageHandlers[t].length;n++)this.messageHandlers[t][n].call(this,e)},this._processMessage=function(t){if(r(t,this.settings)&&"string"==typeof t.data){var e=t.data.match(this.messageRegex);if(e&&3===e.length){var n=e[1],i=e[2];this._fire(n,i)}}}.bind(this),this._onWidthMessage=function(t){var e=parseInt(t);e!==this.parentWidth&&(this.parentWidth=e,this.settings.renderCallback&&this.settings.renderCallback(e),this.sendHeight())},this.sendMessage=function(t,e){window.parent.postMessage(s(this.id,t,e),"*")},this.sendHeight=function(){var t=document.getElementsByTagName("body")[0].offsetHeight.toString();return this.sendMessage("height",t),t}.bind(this),this.getParentPositionInfo=function(){this.sendMessage("parentPositionInfo")},this.scrollParentTo=function(t){this.sendMessage("navigateTo","#"+t)},this.navigateParentTo=function(t){this.sendMessage("navigateTo",t)},this.scrollParentToChildEl=function(t){var e=document.getElementById(t).getBoundingClientRect().top+window.pageYOffset;this.scrollParentToChildPos(e)},this.scrollParentToChildPos=function(t){this.sendMessage("scrollToChildPos",t.toString())};for(var e in this.remove=function(){window.removeEventListener("message",this._processMessage),this.timerId&&clearInterval(this.timerId)},t)this.settings[e]=t[e];this.id=i("childId")||t.id,this.messageRegex=new RegExp("^pymxPYMx"+this.id+"xPYMx(\\S+)"+"xPYMx(.*)$");var o=parseInt(i("initialWidth"));return this.parentUrl=i(this.settings.parenturlparam),this.parentTitle=i("parentTitle"),this.onMessage("width",this._onWidthMessage),window.addEventListener("message",this._processMessage,!1),this.settings.renderCallback&&this.settings.renderCallback(o),this.sendHeight(),this.settings.polling&&(this.timerId=window.setInterval(this.sendHeight,this.settings.polling)),function(t){var e,i=document.getElementsByTagName("html")[0],r=i.className;try{e=window.self!==window.top?"embedded":"not-embedded"}catch(t){e="embedded"}r.indexOf(e)<0&&(i.className=r?r+" "+e:e,t&&t(e),n("marked-embedded"))}(t.onMarkedEmbeddedStatus),this},"undefined"!=typeof document&&e.autoInit(!0),e}.call(e,n,e,t))||(t.exports=i)},469:(t,e,n)=>{var i;t=n.nmd(t),function(){var r="object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g||this||{},s=r._,o=Array.prototype,a=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,l=o.push,c=o.slice,h=a.toString,f=a.hasOwnProperty,d=Array.isArray,p=Object.keys,g=Object.create,m=function(){},v=function(t){return t instanceof v?t:this instanceof v?void(this._wrapped=t):new v(t)};e.nodeType?r._=v:(!t.nodeType&&t.exports&&(e=t.exports=v),e._=v),v.VERSION="1.9.1";var y,b=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,s){return t.call(e,n,i,r,s)}}return function(){return t.apply(e,arguments)}},w=function(t,e,n){return v.iteratee!==y?v.iteratee(t,e):null==t?v.identity:v.isFunction(t)?b(t,e,n):v.isObject(t)&&!v.isArray(t)?v.matcher(t):v.property(t)};v.iteratee=y=function(t,e){return w(t,e,1/0)};var x=function(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+e];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,arguments[0],i);case 2:return t.call(this,arguments[0],arguments[1],i)}var s=Array(e+1);for(r=0;r<e;r++)s[r]=arguments[r];return s[e]=i,t.apply(this,s)}},_=function(t){if(!v.isObject(t))return{};if(g)return g(t);m.prototype=t;var e=new m;return m.prototype=null,e},M=function(t){return function(e){return null==e?void 0:e[t]}},j=function(t,e){return null!=t&&f.call(t,e)},O=function(t,e){for(var n=e.length,i=0;i<n;i++){if(null==t)return;t=t[e[i]]}return n?t:void 0},A=Math.pow(2,53)-1,I=M("length"),E=function(t){var e=I(t);return"number"==typeof e&&e>=0&&e<=A};v.each=v.forEach=function(t,e,n){var i,r;if(e=b(e,n),E(t))for(i=0,r=t.length;i<r;i++)e(t[i],i,t);else{var s=v.keys(t);for(i=0,r=s.length;i<r;i++)e(t[s[i]],s[i],t)}return t},v.map=v.collect=function(t,e,n){e=w(e,n);for(var i=!E(t)&&v.keys(t),r=(i||t).length,s=Array(r),o=0;o<r;o++){var a=i?i[o]:o;s[o]=e(t[a],a,t)}return s};var S=function(t){var e=function(e,n,i,r){var s=!E(e)&&v.keys(e),o=(s||e).length,a=t>0?0:o-1;for(r||(i=e[s?s[a]:a],a+=t);a>=0&&a<o;a+=t){var u=s?s[a]:a;i=n(i,e[u],u,e)}return i};return function(t,n,i,r){var s=arguments.length>=3;return e(t,b(n,r,4),i,s)}};v.reduce=v.foldl=v.inject=S(1),v.reduceRight=v.foldr=S(-1),v.find=v.detect=function(t,e,n){var i=(E(t)?v.findIndex:v.findKey)(t,e,n);if(void 0!==i&&-1!==i)return t[i]},v.filter=v.select=function(t,e,n){var i=[];return e=w(e,n),v.each(t,(function(t,n,r){e(t,n,r)&&i.push(t)})),i},v.reject=function(t,e,n){return v.filter(t,v.negate(w(e)),n)},v.every=v.all=function(t,e,n){e=w(e,n);for(var i=!E(t)&&v.keys(t),r=(i||t).length,s=0;s<r;s++){var o=i?i[s]:s;if(!e(t[o],o,t))return!1}return!0},v.some=v.any=function(t,e,n){e=w(e,n);for(var i=!E(t)&&v.keys(t),r=(i||t).length,s=0;s<r;s++){var o=i?i[s]:s;if(e(t[o],o,t))return!0}return!1},v.contains=v.includes=v.include=function(t,e,n,i){return E(t)||(t=v.values(t)),("number"!=typeof n||i)&&(n=0),v.indexOf(t,e,n)>=0},v.invoke=x((function(t,e,n){var i,r;return v.isFunction(e)?r=e:v.isArray(e)&&(i=e.slice(0,-1),e=e[e.length-1]),v.map(t,(function(t){var s=r;if(!s){if(i&&i.length&&(t=O(t,i)),null==t)return;s=t[e]}return null==s?s:s.apply(t,n)}))})),v.pluck=function(t,e){return v.map(t,v.property(e))},v.where=function(t,e){return v.filter(t,v.matcher(e))},v.findWhere=function(t,e){return v.find(t,v.matcher(e))},v.max=function(t,e,n){var i,r,s=-1/0,o=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,u=(t=E(t)?t:v.values(t)).length;a<u;a++)null!=(i=t[a])&&i>s&&(s=i);else e=w(e,n),v.each(t,(function(t,n,i){((r=e(t,n,i))>o||r===-1/0&&s===-1/0)&&(s=t,o=r)}));return s},v.min=function(t,e,n){var i,r,s=1/0,o=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var a=0,u=(t=E(t)?t:v.values(t)).length;a<u;a++)null!=(i=t[a])&&i<s&&(s=i);else e=w(e,n),v.each(t,(function(t,n,i){((r=e(t,n,i))<o||r===1/0&&s===1/0)&&(s=t,o=r)}));return s},v.shuffle=function(t){return v.sample(t,1/0)},v.sample=function(t,e,n){if(null==e||n)return E(t)||(t=v.values(t)),t[v.random(t.length-1)];var i=E(t)?v.clone(t):v.values(t),r=I(i);e=Math.max(Math.min(e,r),0);for(var s=r-1,o=0;o<e;o++){var a=v.random(o,s),u=i[o];i[o]=i[a],i[a]=u}return i.slice(0,e)},v.sortBy=function(t,e,n){var i=0;return e=w(e,n),v.pluck(v.map(t,(function(t,n,r){return{value:t,index:i++,criteria:e(t,n,r)}})).sort((function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index})),"value")};var T=function(t,e){return function(n,i,r){var s=e?[[],[]]:{};return i=w(i,r),v.each(n,(function(e,r){var o=i(e,r,n);t(s,e,o)})),s}};v.groupBy=T((function(t,e,n){j(t,n)?t[n].push(e):t[n]=[e]})),v.indexBy=T((function(t,e,n){t[n]=e})),v.countBy=T((function(t,e,n){j(t,n)?t[n]++:t[n]=1}));var k=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;v.toArray=function(t){return t?v.isArray(t)?c.call(t):v.isString(t)?t.match(k):E(t)?v.map(t,v.identity):v.values(t):[]},v.size=function(t){return null==t?0:E(t)?t.length:v.keys(t).length},v.partition=T((function(t,e,n){t[n?0:1].push(e)}),!0),v.first=v.head=v.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:v.initial(t,t.length-e)},v.initial=function(t,e,n){return c.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},v.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:v.rest(t,Math.max(0,t.length-e))},v.rest=v.tail=v.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},v.compact=function(t){return v.filter(t,Boolean)};var C=function(t,e,n,i){for(var r=(i=i||[]).length,s=0,o=I(t);s<o;s++){var a=t[s];if(E(a)&&(v.isArray(a)||v.isArguments(a)))if(e)for(var u=0,l=a.length;u<l;)i[r++]=a[u++];else C(a,e,n,i),r=i.length;else n||(i[r++]=a)}return i};v.flatten=function(t,e){return C(t,e,!1)},v.without=x((function(t,e){return v.difference(t,e)})),v.uniq=v.unique=function(t,e,n,i){v.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=w(n,i));for(var r=[],s=[],o=0,a=I(t);o<a;o++){var u=t[o],l=n?n(u,o,t):u;e&&!n?(o&&s===l||r.push(u),s=l):n?v.contains(s,l)||(s.push(l),r.push(u)):v.contains(r,u)||r.push(u)}return r},v.union=x((function(t){return v.uniq(C(t,!0,!0))})),v.intersection=function(t){for(var e=[],n=arguments.length,i=0,r=I(t);i<r;i++){var s=t[i];if(!v.contains(e,s)){var o;for(o=1;o<n&&v.contains(arguments[o],s);o++);o===n&&e.push(s)}}return e},v.difference=x((function(t,e){return e=C(e,!0,!0),v.filter(t,(function(t){return!v.contains(e,t)}))})),v.unzip=function(t){for(var e=t&&v.max(t,I).length||0,n=Array(e),i=0;i<e;i++)n[i]=v.pluck(t,i);return n},v.zip=x(v.unzip),v.object=function(t,e){for(var n={},i=0,r=I(t);i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n};var P=function(t){return function(e,n,i){n=w(n,i);for(var r=I(e),s=t>0?0:r-1;s>=0&&s<r;s+=t)if(n(e[s],s,e))return s;return-1}};v.findIndex=P(1),v.findLastIndex=P(-1),v.sortedIndex=function(t,e,n,i){for(var r=(n=w(n,i,1))(e),s=0,o=I(t);s<o;){var a=Math.floor((s+o)/2);n(t[a])<r?s=a+1:o=a}return s};var R=function(t,e,n){return function(i,r,s){var o=0,a=I(i);if("number"==typeof s)t>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(n&&s&&a)return i[s=n(i,r)]===r?s:-1;if(r!=r)return(s=e(c.call(i,o,a),v.isNaN))>=0?s+o:-1;for(s=t>0?o:a-1;s>=0&&s<a;s+=t)if(i[s]===r)return s;return-1}};v.indexOf=R(1,v.findIndex,v.sortedIndex),v.lastIndexOf=R(-1,v.findLastIndex),v.range=function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),s=0;s<i;s++,t+=n)r[s]=t;return r},v.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],i=0,r=t.length;i<r;)n.push(c.call(t,i,i+=e));return n};var z=function(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var s=_(t.prototype),o=t.apply(s,r);return v.isObject(o)?o:s};v.bind=x((function(t,e,n){if(!v.isFunction(t))throw new TypeError("Bind must be called on a function");var i=x((function(r){return z(t,i,e,this,n.concat(r))}));return i})),v.partial=x((function(t,e){var n=v.partial.placeholder,i=function(){for(var r=0,s=e.length,o=Array(s),a=0;a<s;a++)o[a]=e[a]===n?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return z(t,i,this,this,o)};return i})),v.partial.placeholder=v,v.bindAll=x((function(t,e){var n=(e=C(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=e[n];t[i]=v.bind(t[i],t)}})),v.memoize=function(t,e){var n=function(i){var r=n.cache,s=""+(e?e.apply(this,arguments):i);return j(r,s)||(r[s]=t.apply(this,arguments)),r[s]};return n.cache={},n},v.delay=x((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),v.defer=v.partial(v.delay,v,1),v.throttle=function(t,e,n){var i,r,s,o,a=0;n||(n={});var u=function(){a=!1===n.leading?0:v.now(),i=null,o=t.apply(r,s),i||(r=s=null)},l=function(){var l=v.now();a||!1!==n.leading||(a=l);var c=e-(l-a);return r=this,s=arguments,c<=0||c>e?(i&&(clearTimeout(i),i=null),a=l,o=t.apply(r,s),i||(r=s=null)):i||!1===n.trailing||(i=setTimeout(u,c)),o};return l.cancel=function(){clearTimeout(i),a=0,i=r=s=null},l},v.debounce=function(t,e,n){var i,r,s=function(e,n){i=null,n&&(r=t.apply(e,n))},o=x((function(o){if(i&&clearTimeout(i),n){var a=!i;i=setTimeout(s,e),a&&(r=t.apply(this,o))}else i=v.delay(s,e,this,o);return r}));return o.cancel=function(){clearTimeout(i),i=null},o},v.wrap=function(t,e){return v.partial(e,t)},v.negate=function(t){return function(){return!t.apply(this,arguments)}},v.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},v.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},v.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},v.once=v.partial(v.before,2),v.restArguments=x;var H=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],W=function(t,e){var n=N.length,i=t.constructor,r=v.isFunction(i)&&i.prototype||a,s="constructor";for(j(t,s)&&!v.contains(e,s)&&e.push(s);n--;)(s=N[n])in t&&t[s]!==r[s]&&!v.contains(e,s)&&e.push(s)};v.keys=function(t){if(!v.isObject(t))return[];if(p)return p(t);var e=[];for(var n in t)j(t,n)&&e.push(n);return H&&W(t,e),e},v.allKeys=function(t){if(!v.isObject(t))return[];var e=[];for(var n in t)e.push(n);return H&&W(t,e),e},v.values=function(t){for(var e=v.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i},v.mapObject=function(t,e,n){e=w(e,n);for(var i=v.keys(t),r=i.length,s={},o=0;o<r;o++){var a=i[o];s[a]=e(t[a],a,t)}return s},v.pairs=function(t){for(var e=v.keys(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=[e[r],t[e[r]]];return i},v.invert=function(t){for(var e={},n=v.keys(t),i=0,r=n.length;i<r;i++)e[t[n[i]]]=n[i];return e},v.functions=v.methods=function(t){var e=[];for(var n in t)v.isFunction(t[n])&&e.push(n);return e.sort()};var B=function(t,e){return function(n){var i=arguments.length;if(e&&(n=Object(n)),i<2||null==n)return n;for(var r=1;r<i;r++)for(var s=arguments[r],o=t(s),a=o.length,u=0;u<a;u++){var l=o[u];e&&void 0!==n[l]||(n[l]=s[l])}return n}};v.extend=B(v.allKeys),v.extendOwn=v.assign=B(v.keys),v.findKey=function(t,e,n){e=w(e,n);for(var i,r=v.keys(t),s=0,o=r.length;s<o;s++)if(e(t[i=r[s]],i,t))return i};var $,D,F=function(t,e,n){return e in n};v.pick=x((function(t,e){var n={},i=e[0];if(null==t)return n;v.isFunction(i)?(e.length>1&&(i=b(i,e[1])),e=v.allKeys(t)):(i=F,e=C(e,!1,!1),t=Object(t));for(var r=0,s=e.length;r<s;r++){var o=e[r],a=t[o];i(a,o,t)&&(n[o]=a)}return n})),v.omit=x((function(t,e){var n,i=e[0];return v.isFunction(i)?(i=v.negate(i),e.length>1&&(n=e[1])):(e=v.map(C(e,!1,!1),String),i=function(t,n){return!v.contains(e,n)}),v.pick(t,i,n)})),v.defaults=B(v.allKeys,!0),v.create=function(t,e){var n=_(t);return e&&v.extendOwn(n,e),n},v.clone=function(t){return v.isObject(t)?v.isArray(t)?t.slice():v.extend({},t):t},v.tap=function(t,e){return e(t),t},v.isMatch=function(t,e){var n=v.keys(e),i=n.length;if(null==t)return!i;for(var r=Object(t),s=0;s<i;s++){var o=n[s];if(e[o]!==r[o]||!(o in r))return!1}return!0},$=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var r=typeof t;return("function"===r||"object"===r||"object"==typeof e)&&D(t,e,n,i)},D=function(t,e,n,i){t instanceof v&&(t=t._wrapped),e instanceof v&&(e=e._wrapped);var r=h.call(t);if(r!==h.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return u.valueOf.call(t)===u.valueOf.call(e)}var s="[object Array]"===r;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,a=e.constructor;if(o!==a&&!(v.isFunction(o)&&o instanceof o&&v.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===t)return i[l]===e;if(n.push(t),i.push(e),s){if((l=t.length)!==e.length)return!1;for(;l--;)if(!$(t[l],e[l],n,i))return!1}else{var c,f=v.keys(t);if(l=f.length,v.keys(e).length!==l)return!1;for(;l--;)if(c=f[l],!j(e,c)||!$(t[c],e[c],n,i))return!1}return n.pop(),i.pop(),!0},v.isEqual=function(t,e){return $(t,e)},v.isEmpty=function(t){return null==t||(E(t)&&(v.isArray(t)||v.isString(t)||v.isArguments(t))?0===t.length:0===v.keys(t).length)},v.isElement=function(t){return!(!t||1!==t.nodeType)},v.isArray=d||function(t){return"[object Array]"===h.call(t)},v.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},v.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(t){v["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}})),v.isArguments(arguments)||(v.isArguments=function(t){return j(t,"callee")});var L=r.document&&r.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof L&&(v.isFunction=function(t){return"function"==typeof t||!1}),v.isFinite=function(t){return!v.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},v.isNaN=function(t){return v.isNumber(t)&&isNaN(t)},v.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===h.call(t)},v.isNull=function(t){return null===t},v.isUndefined=function(t){return void 0===t},v.has=function(t,e){if(!v.isArray(e))return j(t,e);for(var n=e.length,i=0;i<n;i++){var r=e[i];if(null==t||!f.call(t,r))return!1;t=t[r]}return!!n},v.noConflict=function(){return r._=s,this},v.identity=function(t){return t},v.constant=function(t){return function(){return t}},v.noop=function(){},v.property=function(t){return v.isArray(t)?function(e){return O(e,t)}:M(t)},v.propertyOf=function(t){return null==t?function(){}:function(e){return v.isArray(e)?O(t,e):t[e]}},v.matcher=v.matches=function(t){return t=v.extendOwn({},t),function(e){return v.isMatch(e,t)}},v.times=function(t,e,n){var i=Array(Math.max(0,t));e=b(e,n,1);for(var r=0;r<t;r++)i[r]=e(r);return i},v.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},v.now=Date.now||function(){return(new Date).getTime()};var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},K=v.invert(U),q=function(t){var e=function(e){return t[e]},n="(?:"+v.keys(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};v.escape=q(U),v.unescape=q(K),v.result=function(t,e,n){v.isArray(e)||(e=[e]);var i=e.length;if(!i)return v.isFunction(n)?n.call(t):n;for(var r=0;r<i;r++){var s=null==t?void 0:t[e[r]];void 0===s&&(s=n,r=i),t=v.isFunction(s)?s.call(t):s}return t};var V=0;v.uniqueId=function(t){var e=++V+"";return t?t+e:e},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Y=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(t){return"\\"+J[t]};v.template=function(t,e,n){!e&&n&&(e=n),e=v.defaults({},e,v.templateSettings);var i,r=RegExp([(e.escape||Y).source,(e.interpolate||Y).source,(e.evaluate||Y).source].join("|")+"|$","g"),s=0,o="__p+='";t.replace(r,(function(e,n,i,r,a){return o+=t.slice(s,a).replace(G,Q),s=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(o+="';\n"+r+"\n__p+='"),e})),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var a=function(t){return i.call(this,t,v)},u=e.variable||"obj";return a.source="function("+u+"){\n"+o+"}",a},v.chain=function(t){var e=v(t);return e._chain=!0,e};var X=function(t,e){return t._chain?v(e).chain():e};v.mixin=function(t){return v.each(v.functions(t),(function(e){var n=v[e]=t[e];v.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),X(this,n.apply(v,t))}})),v},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=o[t];v.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],X(this,n)}})),v.each(["concat","join","slice"],(function(t){var e=o[t];v.prototype[t]=function(){return X(this,e.apply(this._wrapped,arguments))}})),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return String(this._wrapped)},void 0===(i=function(){return v}.apply(e,[]))||(t.exports=i)}()}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t=n(821),e=n(82),i=n(231),r=function(){function n(){var n=this;this.configService=new e.default,this.$embedContainer=document.getElementById("embed-content"),this.$embedResource=document.getElementById("embed-image"),this.resourceOriginalWidth=this.configService.get("resource.width"),this.resourceOriginalHeight=this.configService.get("resource.height"),!0===this.configService.get("isStandalone")?this.initResizer():(this.$embedResource.style.width="100%",this.$embedResource.style.height="auto",this.pymChild=new t.Child({id:"phraseanet-embed-frame",renderCallback:function(t){var e=n.resourceOriginalHeight/n.resourceOriginalWidth;n.$embedResource.style.width="100%",n.$embedResource.style.height="auto",n.$embedContainer.style.height=t*e+"px"}}),""===this.pymChild.parentUrl&&this.initResizer())}return n.prototype.initResizer=function(){this.resizer=new i.default({target:this.$embedResource,container:this.$embedContainer,resizeOnWindowChange:!0===this.configService.get("resource.fitIn")}),this.resizer.setContainerDimensions({width:window.innerWidth,height:window.innerHeight}),this.resizer.setTargetDimensions({width:this.resourceOriginalWidth,height:this.resourceOriginalHeight}),this.resizer.resize()},n}();window.embedPlugin=new r})()})();